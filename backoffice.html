<!DOCTYPE html>
<!-- Action
Comedy
Drama
Horror
Mystery
Romance
Thriller -->

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />
    <link href="css/styles.css" rel="stylesheet" />
    <title>Backoffice Netflix</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="./index.html">
          <img src="./assets/netflix_logo.png" id="logo" />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="./index.html">Home</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="profile-page">
      <div class="container">
        <h1 class="text-light profile-title">Edit Movies</h1>
        <hr />

        <div class="row">
          <!-- <div class="col-md-3 col-xs-12">
            <img src="./assets/avatar.png" width="200px" />
          </div> -->
          <div class="col-md-9 col-xs-12">
            <label for="movie"><h3>Movie</h3></label>
            <input
              id="movieName"
              placeholder="MOVIE NAME"
              type="text"
              class="netflix-input mb-2"
              required
            />

            <div class="d-flex flex-column mb-4 mt-4">
              <label for="category"><h3>Category</h3></label>
              <input
                id="movieCategory"
                placeholder="CATEGORY"
                type="text"
                class="netflix-input mb-2"
                required
              />
              <label for="category"><h3>Description</h3></label>
              <input
                id="movieDescription"
                placeholder="DESCRIPTION"
                type="text"
                class="netflix-input mb-2"
              /><label for="category"><h3>Image</h3></label>
              <input
                id="imageURL"
                placeholder="IMAGE"
                type="text"
                class="netflix-input mb-2"
                required
              />
              <!-- <h4 class="text-muted">Language</h4>
              <button class="btn btn-outline-light mt-2 dropdown-toggle w-25">
                English
              </button> -->
            </div>
            <hr />
            <div class="d-flex flex-column mt-2">
              <!-- <h4 class="text-muted">Maturity Settings</h4>
              <button class="btn btn-secondary mt-4 w-50 mb-4">
                ALL MATURITY SETTINGS
              </button> -->

              <!-- <p class="text-light mt-2">
                Show files for all maturity settings for this profile.
              </p> -->

              <!-- <button class="btn btn-outline-secondary mt-2 w-25">EDIT</button> -->
            </div>

            <hr />
            <div class="mt-2">
              <!-- <h4 class="text-muted">Autoplay Controls</h4> -->
              <div class="row mt-5">
                <div class="col-md-1">
                  <!-- <input
                    class="form-check-input btn-secondary"
                    type="checkbox"
                  /> -->
                </div>
                <div class="col-md-11">
                  <!-- Autoplay next episode in a series on all devices -->
                </div>
              </div>
              <div class="row mt-2">
                <div class="col-md-1">
                  <!-- <input
                    class="form-check-input btn-secondary"
                    type="checkbox"
                  /> -->
                </div>
                <div class="col-md-11">
                  <!-- Autoplay next episode in a series on all devices -->
                </div>
              </div>
            </div>
          </div>
        </div>
        <hr />
        <div onclick="handleSubmit()" class="row">
          <div class="col-md-3">
            <button id="btnSave" type="button" class="btn btn-light w-100">
              SAVE
            </button>
          </div>
          <div class="col-md-4">
            <button
              id="btnEdit"
              type="button"
              class="btn btn-outline-secondary w-50"
            >
              EDIT
            </button>
          </div>
          <div class="col-md-4">
            <button
              id="btnDelete"
              type="button"
              class="btn btn-outline-secondary w-40"
            >
              DELETE
            </button>
          </div>
        </div>
      </div>
    </div>
    <script>
      //   {
      //     "_id": "5d3598a3a38caa57a0272d33", //SERVER GENERATED
      //     "name": "Random drama movie",
      //     "description": "A description of the movie",
      //     "category": "drama",
      //     "imageUrl": "https://bit.ly/3bVHHZ4",
      //     "userId": "admin",  //SERVER GENERATED
      //     "createdAt": "2019-07-22T11:06:11.784Z",  //SERVER GENERATED
      //     "updatedAt": "2019-07-22T11:06:11.784Z",  //SERVER GENERATED
      //     "__v": 0  //SERVER GENERATED
      // }

      const handleSubmit = async () => {
        const url =
          "https://strive-school-testing-apis.herokuapp.com/api/movies/"
        event.preventDefault()

        const newMovieObject = {
          name: document.getElementById("movieName").value,
          description: document.getElementById("movieDescription").value,
          category: document.getElementById("movieCategory").value,
          imageUrl: document.getElementById("imageURL").value,
        }

        try {
          const response = await fetch(url, {
            method: "POST",
            headers: {
              Authorization:
                "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGIwY2QyN2RjMTQ1ODAwMTVlNGFkZGUiLCJpYXQiOjE2MjUyMzMxNTcsImV4cCI6MTYyNjQ0Mjc1N30.7JSv8NoAH_q4Z2AIIRUoMgDrM1BcWFg7dW4HmA4rTR8",
              "Content-Type": "application/json",
            },
            body: JSON.stringify(newMovieObject),
          })
          const movie = await response.json()
          console.log(movie)
        } catch (error) {
          // if(response.ok) {
          //   const data = await response.json()
          //   alert("movie saved")
          // } else {
          //   console.log("else")
          // }
          // if(response.status === 400){
          //   throw new Error("Bad request 400")
          // } else if (response.status === 401){
          //   throw new Error('Anautorized 401')
          // } else if (response.status === 404){
          //   throw new Error('Not found 404')
          // }
          console.log(error)
        }
      }
    </script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
